
    pipeline {
    
    agent any
    
    tools{
        maven 'maven39'
    }
    stages{
      
           stage('docker build and push'){
           
            steps{
                script{
                withCredentials([string(credentialsId: 'docker_pass', variable: 'docker_password')]) {
                   sh '''  
                                    docker build -t nwajienelson/web-app:${VERSION} .
                                    docker login -u nwajienelson -p ${docker_password}
                                    docker push nwajienelson/web-app:${VERSION}
                                    docker rmi  nwajienelson/web-app:${VERSION}
                                
                     '''
                }
            }
        }
       
            }
        }
    }

